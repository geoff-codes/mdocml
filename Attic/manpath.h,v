head	1.8;
access;
symbols
	VERSION_1_13_3:1.7
	VERSION_1_13_2:1.7
	VERSION_1_12_4:1.6
	VERSION_1_13_1:1.6
	VERSION_1_12_3:1.6
	VERSION_1_12_2:1.6
	VERSION_1_12:1.6.0.2
	VERSION_1_12_1:1.5;
locks; strict;
comment	@ * @;


1.8
date	2015.03.27.17.37.25;	author schwarze;	state dead;
branches;
next	1.7;

1.7
date	2014.12.01.04.05.32;	author schwarze;	state Exp;
branches;
next	1.6;

1.6
date	2012.06.08.10.32.40;	author kristaps;	state Exp;
branches;
next	1.5;

1.5
date	2011.12.13.20.56.46;	author kristaps;	state Exp;
branches;
next	1.4;

1.4
date	2011.12.12.02.00.49;	author schwarze;	state Exp;
branches;
next	1.3;

1.3
date	2011.11.24.10.44.56;	author kristaps;	state Exp;
branches;
next	1.2;

1.2
date	2011.11.24.10.43.55;	author kristaps;	state Exp;
branches;
next	1.1;

1.1
date	2011.11.23.09.47.38;	author kristaps;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Parse the new man.conf(5) "output" directive.
The next step will be to actually use the parsed data.
@
text
@@


1.7
log
@remove unneccessary inclusion protection; patch from deraadt@@
@
text
@a0 34
/*	$Id: manpath.h,v 1.6 2012/06/08 10:32:40 kristaps Exp $ */
/*
 * Copyright (c) 2011 Ingo Schwarze <schwarze@@openbsd.org>
 * Copyright (c) 2011 Kristaps Dzonsons <kristaps@@bsd.lv>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

/*
 * Unsorted list of unique, absolute paths to be searched for manual
 * databases.
 */
struct	manpaths {
	size_t	  sz;
	char	**paths;
};

__BEGIN_DECLS

void	 manpath_manconf(struct manpaths *, const char *);
void	 manpath_parse(struct manpaths *, const char *, char *, char *);
void	 manpath_free(struct manpaths *);

__END_DECLS
@


1.6
log
@Use size_t in manpath instead of int.
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.5 2011/12/13 20:56:46 kristaps Exp $ */
a17 2
#ifndef MANPATH_H
#define MANPATH_H
a34 2

#endif /*!MANPATH_H*/
@


1.5
log
@Have manpath.c properly use manpath(1), that is, using -C and -m and so on.
This also cleans up the code a little bit.  While here, make some functions
static that are only used within manpath.c.
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.4 2011/12/12 02:00:49 schwarze Exp $ */
d26 1
a26 1
	int	  sz;
@


1.4
log
@implement -C (alternative config file) for apropos(1) and mandocdb(8),
including various tweaks to the whatis(8) manual;
ok kristaps@@
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.3 2011/11/24 10:44:56 kristaps Exp $ */
a33 2
void	 manpath_parseconf(struct manpaths *, const char *);
void	 manpath_parseline(struct manpaths *, char *);
@


1.3
log
@Allow man.conf file to be assignable.
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.2 2011/11/24 10:43:55 kristaps Exp $ */
d32 3
a34 3
void	 manpath_manconf(const char *, struct manpaths *);
void	 manpath_parse(struct manpaths *, char *, char *);
void	 manpath_parseconf(struct manpaths *);
@


1.2
log
@Export the manpath_manconf() function, slightly reorderng manpath.c while
doing so.  This will be used by a jailed man.cgi, as the cache built by
manup(8) creates a man.conf for it to use.
@
text
@d1 1
a1 1
/*	$Id: manpath.h,v 1.1 2011/11/23 09:47:38 kristaps Exp $ */
d32 1
a32 1
void	 manpath_manconf(struct manpaths *);
@


1.1
log
@Support for Open/NetBSD's /etc/man.conf and others' manpath(1).
Most of this code (except the manpath part) written by schwarze@@.
This isn't hooked into anything yet.
@
text
@d1 1
a1 1
/*	$Id: apropos_db.h,v 1.6 2011/11/20 15:43:14 kristaps Exp $ */
d32 1
@
