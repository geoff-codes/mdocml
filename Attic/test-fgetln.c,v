head	1.4;
access;
symbols
	VERSION_1_13_3:1.2
	VERSION_1_13_2:1.2
	VERSION_1_12_4:1.2
	VERSION_1_13_1:1.2
	VERSION_1_12_3:1.1
	VERSION_1_12_2:1.1
	VERSION_1_12:1.2.0.2
	VERSION_1_12_1:1.1;
locks; strict;
comment	@ * @;


1.4
date	2015.11.07.17.58.55;	author schwarze;	state dead;
branches;
next	1.3;

1.3
date	2015.10.06.18.32.20;	author schwarze;	state Exp;
branches;
next	1.2;

1.2
date	2014.01.04.01.11.00;	author schwarze;	state Exp;
branches;
next	1.1;

1.1
date	2011.12.13.11.26.12;	author kristaps;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Modernization, no functional change intended:
Use the POSIX function getline(3) rather than the slightly
dangerous BSD function fgetln(3).
Remove the related compatibility code.
@
text
@@


1.3
log
@modernize style: "return" is not a function
@
text
@a0 11
#include <sys/types.h>
#include <stdio.h>
#include <unistd.h>

int
main(void)
{
	size_t sz;
	fclose(stdin);
	return fgetln(stdin, &sz) != NULL;
}
@


1.2
log
@Clean up feature tests:
* Split the configure steering script out of the Makefile.
* Let the configure step depend on the test sources.
* Clean up the test programs such that they can be run.
@
text
@d10 1
a10 1
	return(NULL != fgetln(stdin, &sz));
@


1.1
log
@Compatibility support fgetln() on Linux.  This uses the BSD-licensed
implementation from NetBSD tnftpd, Christos Zoulas (copyright message
retained in the compat_fgetln.c file).  Patch verified by schwarze@@.  He
notes that you'll need -pthread for -static binaries (due to libdb), so
I've noted that -static should really only be used for BSD UNIX.

While here, add some forgotten goop to the Makefile, building and
cleaning extra manpages.
@
text
@d1 1
d3 1
a3 1
#include <stdlib.h>
a7 1
	char *cp;
d9 2
a10 2
	cp = fgetln(stdin, &sz);
	return 0;
@
