head	1.15;
access;
symbols
	VERSION_1_9_5:1.15
	VERSION_1_8_5:1.15
	VERSION_1_8_1:1.15
	VERSION_1_7_16:1.15
	VERSION_1_7_15:1.15
	OPENBSD_CHECKIN:1.15
	VERSION_1_6_5:1.15
	VERSION_1_5_1:1.15
	VERSION_1_3_15:1.15
	VERSION_1_3_6:1.15
	VERSION_1_2_0:1.15
	VERSION_1_0_2:1.13
	VERSION_1_0_1:1.12
	version_0_0:1.1.1.1
	version_0:1.1.1;
locks; strict;
comment	@ * @;


1.15
date	2008.12.15.01.54.58;	author kristaps;	state dead;
branches;
next	1.14;

1.14
date	2008.12.10.14.42.46;	author kristaps;	state Exp;
branches;
next	1.13;

1.13
date	2008.12.09.00.27.17;	author kristaps;	state Exp;
branches;
next	1.12;

1.12
date	2008.12.04.11.25.29;	author kristaps;	state Exp;
branches;
next	1.11;

1.11
date	2008.12.03.14.39.59;	author kristaps;	state Exp;
branches;
next	1.10;

1.10
date	2008.11.30.21.41.35;	author kristaps;	state Exp;
branches;
next	1.9;

1.9
date	2008.11.28.11.21.12;	author kristaps;	state Exp;
branches;
next	1.8;

1.8
date	2008.11.27.17.27.50;	author kristaps;	state Exp;
branches;
next	1.7;

1.7
date	2008.11.25.12.14.02;	author kristaps;	state Exp;
branches;
next	1.6;

1.6
date	2008.11.23.23.12.47;	author kristaps;	state Exp;
branches;
next	1.5;

1.5
date	2008.11.23.22.30.53;	author kristaps;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.23.19.10.03;	author kristaps;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.22.20.15.34;	author kristaps;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.22.18.34.06;	author kristaps;	state Exp;
branches;
next	1.1;

1.1
date	2008.11.22.14.53.29;	author kristaps;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.11.22.14.53.29;	author kristaps;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Purged all old files in favour of new design.  Selective reintegration.
@
text
@@


1.14
log
@Made noop the default filter.
@
text
@a0 67
/* $Id: libmdocml.h,v 1.13 2008/12/09 00:27:17 kristaps Exp $ */
/*
 * Copyright (c) 2008 Kristaps Dzonsons <kristaps@@kth.se>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the
 * above copyright notice and this permission notice appear in all
 * copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
 * WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
 * AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
 * DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
 * PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
 * TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
 * PERFORMANCE OF THIS SOFTWARE.
 */
#ifndef LIBMDOCML_H
#define LIBMDOCML_H

#include <sys/types.h>

struct 	md_params_html {
	char		*css;
	int		 flags;
#define	HTML_CSS_EMBED	(1 << 0)
};

union	md_params {
	struct md_params_html html;
};

enum	md_type {
	MD_XML,			/* XML. */
	MD_HTML,		/* HTML4.01-strict. */
	MD_NOOP			/* Validates only. */
};

struct	md_args {
	union md_params	 params;/* Parameters for parser. */
	enum md_type	 type;	/* Type of parser. */

	int		 warnings;
#define	MD_WARN_ALL	(1 << 0)
#define	MD_WARN_ERROR	(1 << 1)
	int		 verbosity;
};

struct	md_buf {
	int		 fd;	/* Open file descriptor. */
	char		*name;	/* Name of file/socket/whatever. */
	char		*buf;	/* Buffer for storing data. */
	size_t		 bufsz;	/* Size of buf. */
};

__BEGIN_DECLS

/* Run the parser over prepared input and output buffers.  Returns -1 on
 * failure and 0 on success.
 */
int	md_run(const struct md_args *,
		const struct md_buf *, const struct md_buf *);

__END_DECLS

#endif /*!LIBMDOCML_H*/
@


1.13
log
@*** empty log message ***
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.12 2008/12/04 11:25:29 kristaps Exp $ */
a23 4
struct 	md_params_xml {
	int		 dummy;
};

a30 1
	struct md_params_xml xml;
d36 2
a37 1
	MD_HTML			/* HTML4.01-strict. */
@


1.12
log
@More html-css.
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.11 2008/12/03 14:39:59 kristaps Exp $ */
d50 1
@


1.11
log
@Abstract ml/mlg/html/xml.
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.10 2008/11/30 21:41:35 kristaps Exp $ */
d29 3
a31 1
	int		 dummy;
@


1.10
log
@Preliminary xml output filter (validate-renamed) done.
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.9 2008/11/28 11:21:12 kristaps Exp $ */
d28 1
a28 1
struct 	md_params_html4_strict {
d34 1
a34 1
	struct md_params_html4_strict html4_strict;
d39 1
a39 1
	MD_HTML4_STRICT		/* HTML4.01-strict. */
@


1.9
log
@Initial pushing to mbuf.
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.8 2008/11/27 17:27:50 kristaps Exp $ */
d24 1
a24 1
struct 	md_params_valid {
d33 1
a33 1
	struct md_params_valid valid;
d38 1
a38 1
	MD_VALID,		/* Validate input only. */
@


1.8
log
@*** empty log message ***
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.7 2008/11/25 12:14:02 kristaps Exp $ */
d24 1
a24 1
struct 	md_params_dummy {
d33 1
a33 1
	struct md_params_dummy dummy;
d38 1
a38 1
	MD_DUMMY,		/* Dummy type echoes input. */
@


1.7
log
@Single call-back for filters.
Removed verbose flag.
Added more macros and arguments.
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.6 2008/11/23 23:12:47 kristaps Exp $ */
d45 4
@


1.6
log
@Fixed clarity in libmdocml.c.
Fixed debugging messages.
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.5 2008/11/23 22:30:53 kristaps Exp $ */
a44 2
	int		 dbg;	/* Debug level. */
#define	MD_DBG_TREE	 1
@


1.5
log
@Considerable improvements across the board.
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.4 2008/11/23 19:10:03 kristaps Exp $ */
d46 1
a46 1
#define	MD_DBG_TREE	(1 << 0)/* Print the parse tree to stdout. */
@


1.4
log
@Initial support for Sh.
Debugging things (will be changed out).
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.3 2008/11/22 20:15:34 kristaps Exp $ */
d46 1
a46 1
#define	MD_DBG_TREE	(1 << 0)
@


1.3
log
@Fuller seperation into mdocml/libmdocml.
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.2 2008/11/22 18:34:06 kristaps Exp $ */
d45 2
@


1.2
log
@Putting md_run and friends into libmdocml (needs work to be useful).
@
text
@d1 1
a1 1
/* $Id: libmdocml.h,v 1.1.1.1 2008/11/22 14:53:29 kristaps Exp $ */
d24 2
a25 6
struct	md_rbuf {
	int		 fd;
	const char	*name;
	char		*buf;
	size_t		 bufsz;
	size_t		 line;
d28 7
a34 6
struct	md_mbuf {
	int		 fd;
	const char	*name;
	char		*buf;
	size_t		 bufsz;
	size_t		 pos;
d38 14
a51 1
	MD_DUMMY
d56 5
a60 1
int	md_run(enum md_type, struct md_mbuf *, struct md_rbuf *);
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/* $Id$ */
d22 22
d46 2
@


1.1.1.1
log
@Initial check-in of mdocml.
@
text
@@
