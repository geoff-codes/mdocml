head	1.4;
access;
symbols
	VERSION_1_13_3:1.4
	VERSION_1_13_2:1.4
	VERSION_1_12_4:1.4
	VERSION_1_13_1:1.4
	VERSION_1_12_3:1.4
	VERSION_1_12_2:1.4
	VERSION_1_12:1.4.0.2
	VERSION_1_12_1:1.3
	VERSION_1_12_0:1.3
	VERSION_1_11_7:1.3
	VERSION_1_11_6:1.3
	VERSION_1_11_5:1.2
	VERSION_1_11_4:1.2
	VERSION_1_11_3:1.2;
locks; strict;
comment	@# @;


1.4
date	2012.07.18.10.39.19;	author schwarze;	state Exp;
branches;
next	1.3;

1.3
date	2011.07.31.11.36.49;	author schwarze;	state Exp;
branches;
next	1.2;

1.2
date	2011.05.26.14.30.28;	author kristaps;	state Exp;
branches;
next	1.1;

1.1
date	2011.05.24.21.18.06;	author kristaps;	state Exp;
branches;
next	;


desc
@@


1.4
log
@The mdoc(7) \*(Ba predefined string actually forces roman font;
that's stupid because it may break enclosing font changes,
but let's do the same for groff bug compatibility.

--> Never use \*(Ba, use just plain "|"! <--

Also, predefined strings are already expanded by the roff(7) parser,
so the mdoc(7) parser has to look for the expanded string.

OpenBSD rev. mdoc.c 1.90 and predefs.in 1.3
@
text
@/*	$Id: predefs.in,v 1.3 2011/07/31 11:36:49 schwarze Exp $ */
/*
 * Copyright (c) 2011 Kristaps Dzonsons <kristaps@@bsd.lv>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */

/*
 * The predefined-string translation tables.  Each corresponds to a
 * predefined strings from (e.g.) tmac/mdoc/doc-nroff.  The left-hand
 * side corresponds to the input sequence (\*x, \*(xx and so on).  The
 * right-hand side is what's produced by libroff.
 *
 * XXX - C-escape strings!
 * XXX - update PREDEF_MAX in roff.c if adding more!
 */

PREDEF("Am", "&")
PREDEF("Ba", "\\fR|\\fP")
PREDEF("Ge", "\\(>=")
PREDEF("Gt", ">")
PREDEF("If", "infinity")
PREDEF("Le", "\\(<=")
PREDEF("Lq", "\\(lq")
PREDEF("Lt", "<")
PREDEF("Na", "NaN")
PREDEF("Ne", "\\(!=")
PREDEF("Pi", "pi")
PREDEF("Pm", "\\(+-")
PREDEF("Rq", "\\(rq")
PREDEF("left-bracket", "[")
PREDEF("left-parenthesis", "(")
PREDEF("lp", "(")
PREDEF("left-singlequote", "\\(oq")
PREDEF("q", "\\(dq")
PREDEF("quote-left", "\\(oq")
PREDEF("quote-right", "\\(cq")
PREDEF("R", "\\(rg")
PREDEF("right-bracket", "]")
PREDEF("right-parenthesis", ")")
PREDEF("rp", ")")
PREDEF("right-singlequote", "\\(cq")
PREDEF("Tm", "(Tm)")
PREDEF("Px", "POSIX")
PREDEF("Ai", "ANSI")
PREDEF("\'", "\\\'")
PREDEF("aa", "\\(aa")
PREDEF("ga", "\\(ga")
PREDEF("`",  "\\`")
PREDEF("lq", "\\(lq")
PREDEF("rq", "\\(rq")
PREDEF("ua", "\\(ua")
PREDEF("va", "\\(va")
PREDEF("<=", "\\(<=")
PREDEF(">=", "\\(>=")
@


1.3
log
@Make sure that in -Tascii mode, predefined strings render the same
way as in groff.  With this fix, \*(If, \*(Pi and \*(Tm change in
other output modes, but -Tascii is what matters.
Found when merging 1.11.3 to OpenBSD; ok kristaps@@.
@
text
@d1 1
a1 1
/*	$Id: predefs.in,v 1.2 2011/05/26 14:30:28 kristaps Exp $ */
d29 1
a29 1
PREDEF("Ba", "|")
@


1.2
log
@The \*q predef certainly doesn't map to \"!  Fix this.
@
text
@d1 1
a1 1
/*	$Id: predefs.in,v 1.1 2011/05/24 21:18:06 kristaps Exp $ */
d32 1
a32 1
PREDEF("If", "\\(if")
d38 1
a38 1
PREDEF("Pi", "\\(*p")
d53 1
a53 1
PREDEF("Tm", "\\(tm")
@


1.1
log
@Most important move in getting predefined strings entirely contained
within roff.c.  These are now grokked from a table in the roff
allocation routine and rest in the newly-created predefs.in (for
consistency with chars.in).  This is a first implementation and will
likely be optimised along with the ds/de lookup table itself.

This allows mandoc-defined predefined strings to be correctly removed or
whatnot; earlier they couldn't.  What will follow is the stripping-away
of all predefined-string crud in the other parts of the system.
@
text
@d1 1
a1 1
/*	$Id: chars.in,v 1.37 2011/04/20 22:50:22 kristaps Exp $ */
d45 1
a45 1
PREDEF("q", "\"")
@
